-- Config dạng ReplyRules như yêu cầu
local AutoReplyConfig = {
    Enabled = true,
    ReplyRadius = 20,
    ReplyCooldown = 15,
    ReplyRules = {
        {
            keywords = { "hi", "hello", "hey", "yo", "sup", "greetings", "howdy" },
            replies = { "Hey!", "Hello there!", "Hi hi!", "Yo!", "Howdy!", "Sup!" }
        },
        {
            keywords = { "donate", "pls", "robux", "can u give", "can you donate", "give me", "i need" },
            replies = { "Sorry, I'm saving.", "Maybe later.", "I can't donate now, good luck!", "I'm low on Robux too!" }
        },
        {
            keywords = { "bot", "auto", "script", "are you a bot", "macro" },
            replies = { "I'm a real player!", "Nope, not a bot.", "Just grinding like you!", "Haha, not a script!" }
        },
        {
            keywords = { "scam", "scammer", "fake" },
            replies = { "I'm not a scammer.", "This is legit.", "I'm just here to chill :)", "No scams here." }
        },
    }
}

local replyCooldowns = {}

Players.PlayerChatted:Connect(function(_, player, message)
	if not AutoReplyConfig.Enabled or player == Players.LocalPlayer then return end

	local myChar = Players.LocalPlayer.Character
	local theirChar = player.Character
	if not (myChar and theirChar and myChar:FindFirstChild("HumanoidRootPart") and theirChar:FindFirstChild("HumanoidRootPart")) then return end

	local dist = (myChar.HumanoidRootPart.Position - theirChar.HumanoidRootPart.Position).Magnitude
	if dist > AutoReplyConfig.ReplyRadius then return end

	if replyCooldowns[player.UserId] and tick() - replyCooldowns[player.UserId] < AutoReplyConfig.ReplyCooldown then return end

	local msg = message:lower()
	for _, rule in ipairs(AutoReplyConfig.ReplyRules) do
		for _, kw in ipairs(rule.keywords) do
			if msg:find(kw) then
				local reply = rule.replies[math.random(1, #rule.replies)]
				game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync(reply)
				replyCooldowns[player.UserId] = tick()
				return
			end
		end
	end
end)
